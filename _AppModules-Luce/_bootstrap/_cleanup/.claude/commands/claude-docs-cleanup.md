# /claude-docs-cleanup - Claude Documentation Cleanup Playbook

**Purpose**: Automated playbook to identify, categorize, and organize Claude-generated build/task documentation into `_build/claude-docs/`

**Version**: 1.0
**Last Updated**: November 15, 2025

---

## Quick Start

```bash
/claude-docs-cleanup scan      # Scan for docs to move
/claude-docs-cleanup preview   # Show what will be moved (dry-run)
/claude-docs-cleanup execute   # Move docs to _build/claude-docs
/claude-docs-cleanup report    # Generate summary report
```

---

## Checklist

- [ ] **Phase 1: Scan & Categorize**
  - [ ] Scan root `/docs/` directory for Claude-created files
  - [ ] Identify build/task completion docs
  - [ ] Categorize by type (Phase summaries, Features, Infrastructure, etc.)
  - [ ] Generate preview of what will be moved

- [ ] **Phase 2: Verify & Approve**
  - [ ] Review categorization
  - [ ] Confirm no critical docs will be moved
  - [ ] Approve file list

- [ ] **Phase 3: Execute Move**
  - [ ] Create target subdirectories in `_build/claude-docs/`
  - [ ] Move files to appropriate categories
  - [ ] Verify all files moved successfully

- [ ] **Phase 4: Cleanup & Report**
  - [ ] Remove empty directories
  - [ ] Update INDEX.md if needed
  - [ ] Generate completion report
  - [ ] Commit changes to git

---

## Detailed Implementation

### Phase 1: Scan & Categorize

#### Step 1.1: Identify All Claude-Created Docs

Search for files that indicate Claude creation:

```bash
# Find files with "Auto-generated by Claude" header
grep -r "Auto-generated by Claude" /home/luce/apps/bloom/docs --include="*.md" -l

# Find Phase-related docs
find /home/luce/apps/bloom/docs -maxdepth 1 -name "PHASE*.md" -o -name "phase*.md"

# Find implementation/completion summaries
find /home/luce/apps/bloom/docs -maxdepth 1 -type f -name "*SUMMARY*.md" -o -name "*COMPLETION*.md"

# Find dark-mode docs
find /home/luce/apps/bloom/docs -maxdepth 1 -type f -name "DARK*.md"

# Find infrastructure/setup docs
find /home/luce/apps/bloom/docs -maxdepth 1 -type f -name "*SETUP*.md" -o -name "*SERVER*.md" -o -name "*PERSISTENT*.md"

# Find dependency/lock/migration docs
find /home/luce/apps/bloom/docs -maxdepth 1 -type f -name "*DEPENDABOT*.md" -o -name "*LOCK*.md" -o -name "*MIGRATION*.md"
```

#### Step 1.2: Categorization Rules

Use this decision tree to categorize each doc:

```
Is this a Phase N implementation/completion summary?
  ├─ YES → phase-N-summaries/
  │
Is this a Phase N planning/next-steps doc?
  ├─ YES → phase-N-planning/
  │
Is this a feature implementation (dark-mode, persona, etc.)?
  ├─ YES → feature-implementations/
  │
Is this infrastructure/deployment/setup related?
  ├─ YES → infrastructure/
  │
Is this related to testing (E2E, unit tests, etc.)?
  ├─ YES → e2e-testing/
  │
Is this related to logging/monitoring?
  ├─ YES → logging-system/
  │
Is this related to task scheduler?
  ├─ YES → task-scheduler/
  │
Is this related to dependencies/lockfiles?
  ├─ YES → dependency-management/
  │
Is this a project status/progress/incident report?
  ├─ YES → project-management/
  │
Is this related to settings persistence?
  ├─ YES → settings-persistence/
  │
Is this related to backup/restore?
  ├─ YES → infrastructure/
  │
Otherwise → misc/ (review manually)
```

#### Step 1.3: Generate Categorization Map

Create a JSON mapping of files to categories:

```json
{
  "phase-3-summaries": [
    "PHASE-3-COMPLETION-SUMMARY.md",
    "PHASE-3-DARK-MODE-AUDIT.md",
    "PHASE-3-IMPLEMENTATION-SUMMARY.md"
  ],
  "phase-4-planning": [
    "PHASE-4-NEXT-STEPS.md"
  ],
  "feature-implementations": [
    "DARK-MODE-IMPLEMENTATION-SUMMARY.md",
    "PERSONA-CONFIGURATION.md"
  ],
  "dependency-management": [
    "DEPENDABOT-PR-MIGRATION-PLAN.md",
    "DEPENDABOT-MIGRATION-STATUS.md"
  ]
}
```

---

### Phase 2: Verify & Approve

#### Step 2.1: Show Preview (Dry-Run)

```bash
# Display files that will be moved without executing
echo "=== Files to be moved to _build/claude-docs/ ==="
echo ""
echo "TARGET: phase-3-summaries/"
echo "  - PHASE-3-COMPLETION-SUMMARY.md"
echo "  - PHASE-3-DARK-MODE-AUDIT.md"
echo "  - PHASE-3-IMPLEMENTATION-SUMMARY.md"
echo ""
echo "TARGET: phase-4-planning/"
echo "  - PHASE-4-NEXT-STEPS.md"
echo ""
echo "TARGET: feature-implementations/"
echo "  - DARK-MODE-IMPLEMENTATION-SUMMARY.md"
echo "  - PERSONA-CONFIGURATION.md"
echo ""
echo "TARGET: dependency-management/"
echo "  - DEPENDABOT-PR-MIGRATION-PLAN.md"
echo "  - DEPENDABOT-MIGRATION-STATUS.md"
echo ""
echo "Total: 8 files"
```

#### Step 2.2: Verify Critical Docs Not Included

```bash
# CRITICAL: Ensure these stay in /docs/
CRITICAL_DOCS=(
  "ARCHITECTURE.md"
  "README.md"
  "INDEX.md"
  "CHANGELOG.md"
  "SECURITY_HALL_OF_FAME.md"
  "SWAGGER-DOCUMENTATION-PLAN.md"
)

for doc in "${CRITICAL_DOCS[@]}"; do
  if [[ " ${FILES_TO_MOVE[@]} " =~ " ${doc} " ]]; then
    echo "ERROR: Critical doc $doc is marked for movement!"
    exit 1
  fi
done
echo "✓ All critical docs safe"
```

#### Step 2.3: Get User Approval

Display preview and ask for confirmation before proceeding.

---

### Phase 3: Execute Move

#### Step 3.1: Create Target Directories

```bash
# Create all target subdirectories
mkdir -p /home/luce/apps/bloom/_build/claude-docs/{phase-3-summaries,phase-4-planning,feature-implementations,dependency-management,infrastructure,e2e-testing,logging-system,task-scheduler,project-management,settings-persistence,misc}
```

#### Step 3.2: Move Files

```bash
# Move phase-3 summaries
mv /home/luce/apps/bloom/docs/PHASE-3-COMPLETION-SUMMARY.md \
   /home/luce/apps/bloom/_build/claude-docs/phase-3-summaries/

# Move phase-4 planning
mv /home/luce/apps/bloom/docs/PHASE-4-NEXT-STEPS.md \
   /home/luce/apps/bloom/_build/claude-docs/phase-4-planning/

# Move feature implementations
mv /home/luce/apps/bloom/docs/DARK-MODE-IMPLEMENTATION-SUMMARY.md \
   /home/luce/apps/bloom/_build/claude-docs/feature-implementations/

# Move dependencies
mv /home/luce/apps/bloom/docs/DEPENDABOT*.md \
   /home/luce/apps/bloom/_build/claude-docs/dependency-management/
```

#### Step 3.3: Verify Movement

```bash
# Check all files moved
find /home/luce/apps/bloom/_build/claude-docs -type f -name "*.md" | wc -l

# Verify specific categories
ls /home/luce/apps/bloom/_build/claude-docs/phase-3-summaries/
ls /home/luce/apps/bloom/_build/claude-docs/feature-implementations/

# Confirm files no longer in /docs/
find /home/luce/apps/bloom/docs -maxdepth 1 -name "PHASE-3*.md" -o -name "DARK-MODE-IMPLEMENTATION*.md"
```

---

### Phase 4: Cleanup & Report

#### Step 4.1: Remove Empty Directories

```bash
# Remove empty subdirs from /docs/ if any
find /home/luce/apps/bloom/docs -maxdepth 1 -type d -empty -delete

# Verify cleanup
ls -la /home/luce/apps/bloom/docs/ | grep "^d"
```

#### Step 4.2: Generate Summary Report

```bash
echo "=== CLAUDE DOCS CLEANUP REPORT ==="
echo "Date: $(date)"
echo ""
echo "Files moved: 8"
echo "Total categories: 4"
echo ""
echo "Breakdown:"
find /home/luce/apps/bloom/_build/claude-docs -type d -not -path '/home/luce/apps/bloom/_build/claude-docs' | while read dir; do
  count=$(find "$dir" -type f -name "*.md" | wc -l)
  category=$(basename "$dir")
  echo "  $category: $count files"
done
echo ""
echo "Cleanup status: ✓ Complete"
```

#### Step 4.3: Update Git

```bash
# Stage changes
git add -A

# Commit with descriptive message
git commit -m "docs: move Claude-generated build docs to _build/claude-docs

- Moved 8 Claude-created docs from /docs/ root
- Organized into 4 categories:
  * phase-3-summaries/ (3 files)
  * phase-4-planning/ (1 file)
  * feature-implementations/ (2 files)
  * dependency-management/ (2 files)
- Keeps /docs/ focused on permanent reference documentation
- Archives all build/task completion reports"
```

---

## Category Reference

| Category | Purpose | Examples |
|----------|---------|----------|
| `phase-N-summaries/` | Phase completion reports | Phase-3-COMPLETION-SUMMARY.md |
| `phase-N-planning/` | Phase planning & next steps | PHASE-4-NEXT-STEPS.md |
| `feature-implementations/` | Feature implementation docs | DARK-MODE-IMPLEMENTATION-SUMMARY.md |
| `infrastructure/` | Deployment, setup, backup docs | PERSISTENT-SERVER-SETUP.md |
| `e2e-testing/` | E2E test plans and results | E2E_REMEDIATION_PLAN.md |
| `logging-system/` | Logging implementation docs | LOGGING-SYSTEM-REMEDIATION-PLAN.md |
| `task-scheduler/` | Task scheduler docs | TASK-SCHEDULER-QUICK-START.md |
| `project-management/` | Status, progress, incident reports | SESSION-DELIVERABLES.md |
| `settings-persistence/` | Settings feature implementation | SETTINGS-PERSISTENCE-IMPLEMENTATION.md |
| `dependency-management/` | Dependency and lockfile docs | DEPENDABOT-PR-MIGRATION-PLAN.md |
| `dark-mode/` | Dark mode implementation docs | DARK-MODE-PHASE1-COMPLETION.md |
| `misc/` | Uncategorized (review manually) | — |

---

## Running the Full Process

```bash
# 1. Run scan
/claude-docs-cleanup scan

# 2. Review preview
/claude-docs-cleanup preview

# 3. (User approves or adjusts categories)

# 4. Execute
/claude-docs-cleanup execute

# 5. Generate report
/claude-docs-cleanup report

# 6. Review and commit
git status
git commit -m "docs: organize Claude-generated docs"
```

---

## Troubleshooting

### Issue: Files not moving

**Check**: Verify source path exists
```bash
ls /home/luce/apps/bloom/docs/PHASE-3-COMPLETION-SUMMARY.md
```

**Solution**: Confirm filename matches exactly (case-sensitive)

### Issue: Permission denied

**Check**: Directory permissions
```bash
ls -la /home/luce/apps/bloom/_build/
```

**Solution**: Ensure write permissions on `_build/` directory

### Issue: Target directory doesn't exist

**Check**: Verify `_build/claude-docs/` exists
```bash
ls -la /home/luce/apps/bloom/_build/claude-docs/
```

**Solution**: Create directory manually: `mkdir -p /home/luce/apps/bloom/_build/claude-docs/{categories}`

### Issue: Can't find Claude-created docs

**Check**: Run comprehensive search
```bash
find /home/luce/apps/bloom/docs -maxdepth 1 -type f -name "*.md"
```

**Solution**: Manually review and identify files

---

## Integration with CI/CD

Add to pre-commit hook or scheduled job:

```bash
#!/bin/bash
# .githooks/pre-commit or scheduled job

# Periodically move Claude docs
if [[ $(find /home/luce/apps/bloom/docs -maxdepth 1 -type f -name "*PHASE*.md" -o -name "*SUMMARY*.md" | wc -l) -gt 0 ]]; then
  echo "Claude docs detected in /docs/, running cleanup..."
  /claude-docs-cleanup execute
  /claude-docs-cleanup report
fi
```

---

## Manual Override

If automated categorization needs adjustment, manually edit the categorization in the command before execution.

**File structure to move:**
```
/docs/
├── PHASE-3-COMPLETION-SUMMARY.md → _build/claude-docs/phase-3-summaries/
├── PHASE-3-DARK-MODE-AUDIT.md → _build/claude-docs/phase-3-summaries/
├── PHASE-3-IMPLEMENTATION-SUMMARY.md → _build/claude-docs/phase-3-summaries/
├── PHASE-4-NEXT-STEPS.md → _build/claude-docs/phase-4-planning/
├── DARK-MODE-IMPLEMENTATION-SUMMARY.md → _build/claude-docs/feature-implementations/
├── PERSONA-CONFIGURATION.md → _build/claude-docs/feature-implementations/
├── DEPENDABOT-PR-MIGRATION-PLAN.md → _build/claude-docs/dependency-management/
└── DEPENDABOT-MIGRATION-STATUS.md → _build/claude-docs/dependency-management/
```

---

## Related Commands

- `/agent-docs` - Documentation management
- `/agent-cli` - CLI operations
- `npm run lint` - Lint documentation
- `git add -A && git commit` - Commit changes

---

## Notes

- Always run `preview` before `execute`
- Critical reference docs (ARCHITECTURE.md, README.md) should remain in `/docs/`
- Session docs in `/docs/sessions/` are already organized
- Archive docs in `/docs/archive/` remain unchanged
- Use `/claude-docs-cleanup report` to verify successful completion

