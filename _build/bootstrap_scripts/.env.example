################################################################################
# Bloom2 Environment Variables (.env.example)
# Copy to .env.local for local development, adjust values as needed
################################################################################

## ============================================================================
## APPLICATION CONFIGURATION
## ============================================================================

# Application name and environment
APP_NAME=Bloom2
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000

## ============================================================================
## DATABASE (PostgreSQL v16.x)
## ============================================================================

# Postgres connection string (local Docker or remote)
# Format: postgresql://[user]:[password]@[host]:[port]/[database]
DATABASE_URL=postgresql://bloom_user:bloom_password@localhost:5432/bloom2_dev

# Database connection pool settings (postgres.js)
DB_POOL_MIN=2
DB_POOL_MAX=20

## ============================================================================
## AUTHENTICATION (Auth.js v5.x)
## ============================================================================

# Auth.js secret for session signing and CSRF tokens
# Generate with: openssl rand -base64 32
AUTH_SECRET=your_secure_random_secret_here_generate_with_openssl

# Session configuration
SESSION_MAX_AGE=604800  # 7 days in seconds
SESSION_UPDATE_AGE=86400  # 1 day in seconds

## ============================================================================
## AI & LLM INTEGRATION (@vercel/ai v3.x)
## ============================================================================

# Anthropic API (Claude models)
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here

# Optional: Custom LLM endpoint (if using local Ollama, etc.)
# LLM_API_BASE_URL=http://localhost:11434

## ============================================================================
## OBSERVABILITY & LOGGING (Pino v8.x)
## ============================================================================

# Logging level: trace, debug, info, warn, error
LOG_LEVEL=debug

# Enable structured logging (JSON)
LOG_FORMAT=json  # or 'pretty' for development

## ============================================================================
## FEATURE FLAGS & RUNTIME CONFIG
## ============================================================================

# Feature toggle examples (stored in DB, overridable)
FEATURE_REVIEW_QUEUE_ENABLED=true
FEATURE_EXPORT_ENABLED=true
FEATURE_PDF_GENERATION_ENABLED=true

# Rate limiting
RATE_LIMIT_REQUESTS=100  # requests per window
RATE_LIMIT_WINDOW_MS=60000  # 1 minute

## ============================================================================
## BACKGROUND JOBS (pg-boss)
## ============================================================================

# Job queue concurrency (tune based on available resources)
JOB_CONCURRENCY=4
JOB_RETENTION_DAYS=30

## ============================================================================
## DOCKER & DEPLOYMENT
## ============================================================================

# Docker Compose environment
DOCKER_REGISTRY=localhost:5000  # or your registry
DOCKER_IMAGE_TAG=latest

# Production-only (not needed for local dev)
# POSTGRES_PASSWORD=your_secure_postgres_password
# POSTGRES_USER=bloom_user
# POSTGRES_DB=bloom2_prod

## ============================================================================
## DEVELOPMENT-ONLY SETTINGS
## ============================================================================

# Enable verbose debugging
DEBUG=*

# Allow dirty git state during bootstrap (development only)
ALLOW_DIRTY=true

# Seed database on startup (useful for testing)
# SEED_DATABASE=true
# SEED_DATA_PATH=./scripts/seed-golden-dataset.sql

## ============================================================================
## NOTES
## ============================================================================

# - Copy this file to .env.local for local development
# - Never commit .env.local to git (it's in .gitignore)
# - Use .env.production for production secrets (never committed)
# - For Docker: pass secrets via docker-compose.override.yml or env file
# - Validate all env vars with @t3-oss/env-nextjs + Zod at startup
# - Missing required vars will cause the app to fail fast at startup

################################################################################
# END .env.example
################################################################################
