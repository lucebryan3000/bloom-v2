#!/usr/bin/env bash
# =============================================================================
# .toolsrc - Local Tools Environment Activation
# =============================================================================
# Source this file to use project-local Node.js and pnpm
# Usage: source .toolsrc
#
# This script:
#   - Prepends .tools/node/bin and .tools/pnpm to PATH
#   - Sets environment variables for tool locations
#   - Provides verification commands
#
# Generated by: OmniForge prereqs-local.sh
# =============================================================================

# Detect project root (directory containing this file)
PROJECT_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Local tools directory
TOOLS_DIR="${PROJECT_ROOT}/.tools"

# Add local Node.js to PATH (highest priority)
export PATH="${TOOLS_DIR}/node/bin:${PATH}"

# Add local pnpm to PATH
export PATH="${TOOLS_DIR}/pnpm/bin:${PATH}"

# Set tool location variables
export NODE_LOCAL_BIN="${TOOLS_DIR}/node/bin/node"
export NPM_LOCAL_BIN="${TOOLS_DIR}/node/bin/npm"
export NPX_LOCAL_BIN="${TOOLS_DIR}/node/bin/npx"
export PNPM_LOCAL_BIN="${TOOLS_DIR}/pnpm/bin/pnpm"

# Disable npm update check (faster)
export NO_UPDATE_NOTIFIER=1

# pnpm configuration
export PNPM_HOME="${TOOLS_DIR}/pnpm"

# Show activation status
echo "âœ“ Local tools activated"
echo "  Node.js: $(command -v node) ($(node --version 2>/dev/null))"
echo "  pnpm: $(command -v pnpm) ($(pnpm --version 2>/dev/null))"
echo ""
echo "  To deactivate: exit this shell or open a new terminal"
